"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/utils"),r=require("primereact/hooks"),l=require("primereact/paginator"),o=require("primereact/ripple"),a=require("primereact/overlayservice"),i=require("primereact/inputtext"),c=require("primereact/tooltip");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var f=s(e),d=u(t);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e){var t=y(e,"string");return"symbol"===m(t)?t:String(t)}function b(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){if(Array.isArray(e))return h(e)}function S(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function C(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e){return v(e)||S(e)||C(e)||E()}function O(e){if(Array.isArray(e))return e}function x(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o,a,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw l}}return i}}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){return O(e)||x(e,t)||C(e,t)||P()}var k={defaultProps:{__TYPE:"Column",align:null,alignFrozen:"left",alignHeader:null,body:null,bodyClassName:null,bodyStyle:null,cellEditValidator:null,cellEditValidatorEvent:"click",className:null,colSpan:null,columnKey:null,dataType:"text",editor:null,excludeGlobalFilter:!1,expander:!1,exportField:null,exportable:!0,field:null,filter:!1,filterApply:null,filterClear:null,filterElement:null,filterField:null,filterFooter:null,filterFunction:null,filterHeader:null,filterHeaderClassName:null,filterHeaderStyle:null,filterMatchMode:null,filterMatchModeOptions:null,filterMaxLength:null,filterMenuClassName:null,filterMenuStyle:null,filterPlaceholder:null,filterType:"text",footer:null,footerClassName:null,footerStyle:null,frozen:!1,header:null,headerClassName:null,headerStyle:null,headerTooltip:null,headerTooltipOptions:null,hidden:!1,maxConstraints:2,onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditCancel:null,onCellEditComplete:null,onCellEditInit:null,onFilterApplyClick:null,onFilterClear:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,reorderable:!0,resizeable:!0,rowEditor:!1,rowReorder:!1,rowReorderIcon:"pi pi-bars",rowSpan:null,selectionMode:null,showAddButton:!0,showApplyButton:!0,showClearButton:!0,showFilterMatchModes:!0,showFilterMenu:!0,showFilterMenuOptions:!0,showFilterOperator:!0,sortField:null,sortFunction:null,sortable:!1,sortableDisabled:!1,style:null,children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,k.defaultProps)},getCProps:function(e){return n.ObjectUtils.getComponentProps(e,k.defaultProps)},getCOtherProps:function(e){return n.ObjectUtils.getComponentDiffProps(e,k.defaultProps)}},D={defaultProps:{__TYPE:"TreeTable",alwaysShowPaginator:!0,className:null,columnResizeMode:"fit",contextMenuSelectionKey:null,currentPageReportTemplate:"({currentPage} of {totalPages})",defaultSortOrder:1,emptyMessage:null,expandedKeys:null,filterDelay:300,filterLocale:void 0,filterMode:"lenient",filters:null,first:null,footer:null,footerColumnGroup:null,frozenFooterColumnGroup:null,frozenHeaderColumnGroup:null,frozenWidth:null,globalFilter:null,globalFilterMatchMode:t.FilterMatchMode.CONTAINS,header:null,headerColumnGroup:null,id:null,lazy:!1,loading:!1,loadingIcon:"pi pi-spinner",metaKeySelection:!0,multiSortMeta:null,onColReorder:null,onCollapse:null,onColumnResizeEnd:null,onContextMenu:null,onContextMenuSelectionChange:null,onExpand:null,onFilter:null,onPage:null,onRowClick:null,onSelect:null,onSelectionChange:null,onSort:null,onToggle:null,onUnselect:null,pageLinkSize:5,paginator:!1,paginatorClassName:null,paginatorDropdownAppendTo:null,paginatorLeft:null,paginatorPosition:"bottom",paginatorRight:null,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",propagateSelectionDown:!0,propagateSelectionUp:!0,removableSort:!1,reorderableColumns:!1,resizableColumns:!1,rowClassName:null,rowHover:!1,rows:null,rowsPerPageOptions:null,scrollHeight:null,scrollable:!1,selectOnEdit:!0,selectionKeys:null,selectionMode:null,showGridlines:!1,sortField:null,sortMode:"single",sortOrder:null,stripedRows:!1,style:null,tabIndex:0,tableClassName:null,tableStyle:null,totalRecords:null,value:null,children:void 0},getProps:function(e){return n.ObjectUtils.getMergedProps(e,D.defaultProps)},getOtherProps:function(e){return n.ObjectUtils.getDiffProps(e,D.defaultProps)}},N=function(e){var t=M(f.useState(!1),2),l=t[0],o=t[1],i=f.useRef(null),c=f.useRef(null),u=f.useRef(!1),s=f.useRef(null),d=f.useRef(null),p=M(r.useEventListener({type:"click",listener:function(e){!u.current&&b(e.target)&&v(e),u.current=!1}}),2),m=p[0],y=p[1],g=function(){e.editor&&!l&&(e.selectOnEdit||!e.selectOnEdit&&e.selected)&&(u.current=!0,o(!0),m(),s.current=function(e){b(e.target)||(u.current=!0)},a.OverlayService.on("overlay-click",s.current))},b=function(e){return i.current&&!(i.current.isSameNode(e)||i.current.contains(e))},h=function(){setTimeout((function(){o(!1),y(),a.OverlayService.off("overlay-click",s.current),s.current=null}),1)},v=function(t){e.cellEditValidator?e.cellEditValidator({originalEvent:t,columnProps:e})&&h():h()};f.useEffect((function(){if(i.current&&e.editor)if(clearTimeout(d.current),l){var t=n.DomHandler.findSingle(i.current,"input");t&&document.activeElement!==t&&!t.hasAttribute("data-isCellEditing")&&(t.setAttribute("data-isCellEditing",!0),t.focus()),c.current.tabIndex=-1}else d.current=setTimeout((function(){c.current&&c.current.setAttribute("tabindex",0)}),50)})),r.useUnmountEffect((function(){s.current&&(a.OverlayService.off("overlay-click",s.current),s.current=null)}));var S,C=n.ObjectUtils.getPropValue(e.bodyClassName,e.node.data,{field:e.field,rowIndex:e.rowIndex,props:e}),E=n.classNames(C||e.className,{"p-editable-column":e.editor,"p-cell-editing":!!e.editor&&l}),w=e.bodyStyle||e.style;if(l){if(!e.editor)throw new Error("Editor is not found on column.");S=n.ObjectUtils.getJSXElement(e.editor,{node:e.node,rowData:e.node.data,value:n.ObjectUtils.resolveFieldData(e.node.data,e.field),field:e.field,rowIndex:e.rowIndex,props:e})}else S=e.body?n.ObjectUtils.getJSXElement(e.body,e.node,{field:e.field,rowIndex:e.rowIndex,props:e}):n.ObjectUtils.resolveFieldData(e.node.data,e.field);var O=e.editor&&f.createElement("a",{tabIndex:0,ref:c,className:"p-cell-editor-key-helper p-hidden-accessible",onFocus:function(e){g()}},f.createElement("span",null));return f.createElement("td",{ref:i,className:E,style:w,onClick:g,onKeyDown:function(e){13!==e.which&&9!==e.which||v(e)}},e.children,O,S)};function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=K(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function K(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}N.displayName="TreeTableBodyCell";var U=f.memo((function(e){var r=f.useRef(null),l=f.useRef(null),a=f.useRef(null),i=f.useRef(!1),c=!!e.expandedKeys&&void 0!==e.expandedKeys[e.node.key],u=function(e,t){return k.getCProp(e,t)},s=function(e){c?m(e):d(e),e.preventDefault(),e.stopPropagation()},d=function(t){var n=e.expandedKeys?F({},e.expandedKeys):{};n[e.node.key]=!0,e.onToggle({originalEvent:t,value:n}),y(t,!0)},m=function(t){var n=F({},e.expandedKeys);delete n[e.node.key],e.onToggle({originalEvent:t,value:n}),y(t,!1)},y=function(t,n){n?e.onExpand&&e.onExpand({originalEvent:t,node:e.node}):e.onCollapse&&e.onCollapse({originalEvent:t,node:e.node})},g=function(t){e.onRowClick&&e.onRowClick(t,e.node),i.current=!1},b=function(t){var r=w(),l=e.selectionKeys?F({},e.selectionKeys):{};r?(e.propagateSelectionDown?C(e.node,!1,l):delete l[e.node.key],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!1,selectionKeys:l}),e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):(e.propagateSelectionDown?C(e.node,!0,l):l[e.node.key]={checked:!0},e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!0,selectionKeys:l}),e.onSelect&&e.onSelect({originalEvent:t,node:e.node})),e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:l}),n.DomHandler.clearSelection()},h=function(){n.DomHandler.addClass(a.current,"p-focus"),n.DomHandler.addClass(l.current,"p-checkbox-focused")},v=function(){n.DomHandler.removeClass(a.current,"p-focus"),n.DomHandler.removeClass(l.current,"p-checkbox-focused")},S=function(t){var n,r=t.check,l=t.selectionKeys,o=0,a=!1,i=j(e.node.children);try{for(i.s();!(n=i.n()).done;){var c=n.value;l[c.key]&&l[c.key].checked?o++:l[c.key]&&l[c.key].partialChecked&&(a=!0)}}catch(e){i.e(e)}finally{i.f()}r&&o===e.node.children.length?l[e.node.key]={checked:!0,partialChecked:!1}:(r||delete l[e.node.key],l[e.node.key]=a||o>0&&o!==e.node.children.length?{checked:!1,partialChecked:!0}:{checked:!1,partialChecked:!1}),e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp(t)},C=function e(t,n,r){if(n?r[t.key]={checked:!0,partialChecked:!1}:delete r[t.key],t.children&&t.children.length)for(var l=0;l<t.children.length;l++)e(t.children[l],n,r)},E=function(){return!("single"!==e.selectionMode&&"multiple"!==e.selectionMode||!e.selectionKeys)&&("single"===e.selectionMode?e.selectionKeys===e.node.key:void 0!==e.selectionKeys[e.node.key])},w=function(){return!!e.selectionKeys&&(e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].checked)},O=function(){if("checkbox"===e.selectionMode&&!1!==e.node.selectable){var t=w(),r=!!e.selectionKeys&&e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].partialChecked,o=n.classNames("p-checkbox-box",{"p-highlight":t,"p-indeterminate":r}),i=n.classNames("p-checkbox-icon p-c",{"pi pi-check":t,"pi pi-minus":r});return f.createElement("div",{className:"p-checkbox p-treetable-checkbox p-component",ref:l,onClick:b,role:"checkbox","aria-checked":t},f.createElement("div",{className:"p-hidden-accessible"},f.createElement("input",{type:"checkbox",onFocus:h,onBlur:v})),f.createElement("div",{className:o,ref:a},f.createElement("span",{className:i})))}return null},x=e.columns.map((function(r,l){var a,i,d,m;return u(r,"expander")&&(d=t.ariaLabel(c?"collapseLabel":"expandLabel"),m=n.classNames("p-treetable-toggler-icon pi pi-fw",{"pi-chevron-right":!c,"pi-chevron-down":c}),a=f.createElement("button",{type:"button",className:"p-treetable-toggler p-link p-unselectable-text",onClick:s,tabIndex:-1,style:{marginLeft:16*e.level+"px",visibility:!1===e.node.leaf||e.node.children&&e.node.children.length?"visible":"hidden"},"aria-label":d},f.createElement("i",{className:m,"aria-hidden":"true"}),f.createElement(o.Ripple,null)),i=O()),f.createElement(N,p({key:"".concat(u(r,"columnKey")||u(r,"field"),"_").concat(l)},k.getCProps(r),{column:r,selectOnEdit:e.selectOnEdit,selected:E(),node:e.node,rowIndex:e.rowIndex}),a,i)})),P=c&&e.node.children?e.node.children.map((function(t,n){return f.createElement(U,{key:"".concat(t.key||JSON.stringify(t.data),"_").concat(n),level:e.level+1,rowIndex:e.rowIndex+"_"+n,node:t,columns:e.columns,expandedKeys:e.expandedKeys,selectOnEdit:e.selectOnEdit,onToggle:e.onToggle,onExpand:e.onExpand,onCollapse:e.onCollapse,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,onRowClick:e.onRowClick,onSelect:e.onSelect,onUnselect:e.onUnselect,propagateSelectionUp:e.propagateSelectionUp,propagateSelectionDown:e.propagateSelectionDown,onPropagateUp:S,rowClassName:e.rowClassName,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu})})):null,M={"p-highlight":E(),"p-highlight-contextmenu":e.contextMenuSelectionKey&&e.contextMenuSelectionKey===e.node.key};if(e.rowClassName){var D=e.rowClassName(e.node);M=F(F({},M),D)}return M=n.classNames(M,e.node.className),f.createElement(f.Fragment,null,f.createElement("tr",{ref:r,tabIndex:0,className:M,style:e.node.style,onClick:g,onTouchEnd:function(){i.current=!0},onContextMenu:function(t){n.DomHandler.clearSelection(),e.onContextMenuSelectionChange&&e.onContextMenuSelectionChange({originalEvent:t,value:e.node.key}),e.onContextMenu&&e.onContextMenu({originalEvent:t,node:e.node})},onKeyDown:function(e){if(e.target===r.current){var t=e.currentTarget;switch(e.which){case 40:var n=t.nextElementSibling;n&&n.focus(),e.preventDefault();break;case 38:var l=t.previousElementSibling;l&&l.focus(),e.preventDefault();break;case 39:c||d(e),e.preventDefault();break;case 37:c&&m(e),e.preventDefault();break;case 13:g(e),e.preventDefault()}}}},x),P)}));function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function I(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}U.displayName="TreeTableRow";var G=f.memo((function(e){var r="single"===e.selectionMode,l="multiple"===e.selectionMode,o=function t(n){var r,l=[],o=A(n=n||e.value);try{for(o.s();!(r=o.n()).done;){var i=r.value;l.push(i.key),a(i.key)&&(l=l.concat(t(i.children)))}}catch(e){o.e(e)}finally{o.f()}return l},a=function(t){return e.expandedKeys&&!!e.expandedKeys[t]},i=function(t,a){e.onRowClick&&e.onRowClick({originalEvent:t,node:a});var i=t.target.nodeName;if("INPUT"!==i&&"BUTTON"!==i&&"A"!==i&&!n.DomHandler.hasClass(t.target,"p-clickable")&&(r||l)&&!1!==a.selectable){var u,s=c(a),f=e.metaKeySelection,d=o(),p=d.findIndex((function(e){return e===a.key}));if(l&&t.shiftKey){n.DomHandler.clearSelection();var m=d.findIndex((function(t){return e.selectionKeys[t]})),y=Math.min(p,m),g=Math.max(p,m);u=z({},e.selectionKeys);for(var b=y;b<=g;b++){u[d[b]]=!0}}else if(f){var h=t.metaKey||t.ctrlKey;s&&h?(r?u=null:delete(u=z({},e.selectionKeys))[a.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):(r?u=a.key:l&&((u=h&&e.selectionKeys?z({},e.selectionKeys):{})[a.key]=!0),e.onSelect&&e.onSelect({originalEvent:t,node:a}))}else r?s?(u=null,e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):(u=a.key,e.onSelect&&e.onSelect({originalEvent:t,node:a})):s?(delete(u=z({},e.selectionKeys))[a.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):((u=e.selectionKeys?z({},e.selectionKeys):{})[a.key]=!0,e.onSelect&&e.onSelect({originalEvent:t,node:a}));e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:u})}},c=function(t){return!(!r&&!l||!e.selectionKeys)&&(r?e.selectionKeys===t.key:void 0!==e.selectionKeys[t.key])},u=function(t,n){return f.createElement(U,{key:"".concat(t.key||JSON.stringify(t.data),"_").concat(n),level:0,rowIndex:n,selectOnEdit:e.selectOnEdit,node:t,columns:e.columns,expandedKeys:e.expandedKeys,onToggle:e.onToggle,onExpand:e.onExpand,onCollapse:e.onCollapse,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,onRowClick:i,onSelect:e.onSelect,onUnselect:e.onUnselect,propagateSelectionUp:e.propagateSelectionUp,propagateSelectionDown:e.propagateSelectionDown,rowClassName:e.rowClassName,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu})},s=e.value&&e.value.length?function(){if(e.paginator&&!e.lazy){for(var t=e.first||0,n=t+(e.rows||0),r=[],l=t;l<n;l++){if(!e.value[l])break;r.push(u(e.value[l]))}return r}return e.value.map(u)}():function(){if(e.loading)return null;var n=e.columns?e.columns.length:null,r=e.emptyMessage||t.localeOption("emptyMessage");return f.createElement("tr",null,f.createElement("td",{className:"p-treetable-emptymessage",colSpan:n},r))}();return f.createElement("tbody",{className:"p-treetable-tbody"},s)}));G.displayName="TreeTableBody";var W={defaultProps:{__TYPE:"ColumnGroup",children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,W.defaultProps)},getCProps:function(e){return n.ObjectUtils.getComponentProps(e,W.defaultProps)}},_={defaultProps:{__TYPE:"Row",style:null,className:null,children:void 0},getProps:function(e){return n.ObjectUtils.getMergedProps(e,_.defaultProps)},getOtherProps:function(e){return n.ObjectUtils.getDiffProps(e,_.defaultProps)},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,_.defaultProps)}},q=f.memo((function(e){var t=function(e,t){return k.getCProp(e,t)},n=function(e,n){return f.createElement("td",{key:e.field||n,className:t(e,"footerClassName")||t(e,"className"),style:t(e,"footerStyle")||t(e,"style"),rowSpan:t(e,"rowSpan"),colSpan:t(e,"colSpan")},t(e,"footer"))},r=function(e,t){var r=f.Children.toArray(_.getCProp(e,"children")).map(n);return f.createElement("tr",{key:t},r)},l=e.columnGroup?f.Children.toArray(W.getCProp(e.columnGroup,"children")).map(r):function(e){if(e){var t=e.map(n);return f.createElement("tr",null,t)}return null}(e.columns);return function(){if(e.columnGroup)return!0;for(var n=0;n<e.columns.length;n++)if(t(e.columns[n],"footer"))return!0;return!1}()?f.createElement("tfoot",{className:"p-treetable-tfoot"},l):null}));function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function B(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}q.displayName="TreeTableFooter";var Y=f.memo((function(e){var t,r=f.useRef(null),l=function(t,r){if(S(r,"sortable")){var l=t.target;(n.DomHandler.hasClass(l,"p-sortable-column")||n.DomHandler.hasClass(l,"p-column-title")||n.DomHandler.hasClass(l,"p-sortable-column-icon")||n.DomHandler.hasClass(l.parentElement,"p-sortable-column-icon"))&&(e.onSort({originalEvent:t,sortField:S(r,"sortField")||S(r,"field"),sortFunction:S(r,"sortFunction"),sortable:S(r,"sortable")}),n.DomHandler.clearSelection())}},o=function(t,n){e.reorderableColumns&&S(n,"reorderable")&&("INPUT"!==t.target.nodeName?t.currentTarget.draggable=!0:"INPUT"===t.target.nodeName&&(t.currentTarget.draggable=!1))},a=function(e,t){"Enter"===e.key&&(l(e,t),e.preventDefault())},u=function(t){if(e.multiSortMeta)for(var n=0;n<e.multiSortMeta.length;n++)if(e.multiSortMeta[n].field===S(t,"field"))return n;return-1},s=function(t,n){e.resizableColumns&&e.onResizeStart&&e.onResizeStart({originalEvent:t,columnEl:t.target.parentElement,column:n})},d=function(t,n){e.onDragStart&&e.onDragStart({originalEvent:t,column:n})},m=function(t,n){e.onDragOver&&e.onDragOver({originalEvent:t,column:n})},y=function(t,n){e.onDragLeave&&e.onDragLeave({originalEvent:t,column:n})},g=function(t,n){e.onDrop&&e.onDrop({originalEvent:t,column:n})},b=function(t,n){if(S(n,"filter")&&e.onFilter){r.current&&clearTimeout(r.current);var l=t.target.value;r.current=setTimeout((function(){e.onFilter({value:l,field:S(n,"field"),matchMode:S(n,"filterMatchMode")||"startsWith"}),r.current=null}),e.filterDelay)}},h=function(e){if(e){var t,n=V(e);try{for(n.s();!(t=n.n()).done;){if(S(t.value,"filter"))return!0}}catch(e){n.e(e)}finally{n.f()}}return!1},v=function(e,t,n){if(S(e,"sortable")){var r=t?n<0?"pi-sort-down":"pi-sort-up":"pi-sort";return"pi-sort-down"===r?"descending":"pi-sort-up"===r?"ascending":"none"}return null},S=function(e){return e?"string"==typeof(arguments.length<=1?void 0:arguments[1])?k.getCProp(e,arguments.length<=1?void 0:arguments[1]):k.getCProp((arguments.length<=1?void 0:arguments[1])||e,arguments.length<=2?void 0:arguments[2]):null},C=function(e,t,r){if(S(e,"sortable")){var l=n.classNames("p-sortable-column-icon","pi pi-fw",t?r<0?"pi-sort-amount-down":"pi-sort-amount-up-alt":"pi-sort-alt");return f.createElement("span",{className:l})}return null},E=function(t){return e.resizableColumns?f.createElement("span",{className:"p-column-resizer p-clickable",onMouseDown:function(e){return s(e,t)}}):null},w=function(t){return-1!==t&&e.multiSortMeta&&e.multiSortMeta.length>1?f.createElement("span",{className:"p-sortable-column-badge"},t+1):null},O=function(t,r){var s;if(S(t,"filter")&&r.renderFilter&&(s=S(t,"filterElement")||f.createElement(i.InputText,{onInput:function(e){return b(e,t)},type:e.filterType,defaultValue:e.filters&&e.filters[S(t,"field")]?e.filters[S(t,"field")].value:null,className:"p-column-filter",placeholder:S(t,"filterPlaceholder"),maxLength:S(t,"filterMaxLength")})),r.filterOnly)return f.createElement("th",{key:S(t,"columnKey")||S(t,"field")||r.index,className:n.classNames("p-filter-column",S(t,"filterHeaderClassName")),style:S(t,"filterHeaderStyle")||S(t,"style"),rowSpan:S(t,"rowSpan"),colSpan:S(t,"colSpan")},s);var h=f.createRef(null),O=u(t),x=-1!==O?e.multiSortMeta[O]:null,P=S(t,"field")===e.sortField,M=null!==x,k=S(t,"sortable")&&(P||M),D=0;P?D=e.sortOrder:M&&(D=x.order);var N=C(t,k,D),j=v(t,k,D),K=w(O),R=n.classNames(S(t,"headerClassName")||S(t,"className"),{"p-sortable-column":S(t,"sortable"),"p-highlight":k,"p-resizable-column":e.resizableColumns&&S(t,"resizeable")}),T=S(t,"headerTooltip"),F=n.ObjectUtils.isNotEmpty(T),U=E(t);return f.createElement(f.Fragment,{key:t.columnKey||t.field||r.index},f.createElement("th",{ref:h,className:R,style:S(t,"headerStyle")||S(t,"style"),tabIndex:S(t,"sortable")?e.tabIndex:null,onClick:function(e){return l(e,t)},onMouseDown:function(e){return o(e,t)},onKeyDown:function(e){return a(e,t)},rowSpan:S(t,"rowSpan"),colSpan:S(t,"colSpan"),"aria-sort":j,onDragStart:function(e){return d(e,t)},onDragOver:function(e){return m(e,t)},onDragLeave:function(e){return y(e,t)},onDrop:function(e){return g(e,t)}},U,f.createElement("span",{className:"p-column-title"},S(t,"header")),N,K,s),F&&f.createElement(c.Tooltip,p({target:h,content:T},S(t,"headerTooltipOptions"))))},x=function(e,t){var n=f.Children.toArray(_.getCProp(e,"children")).map((function(e,t){return O(e,{index:t,filterOnly:!1,renderFilter:!0})}));return f.createElement("tr",{key:t},n)},P=e.columnGroup?f.Children.toArray(W.getCProp(e.columnGroup,"children")).map(x):(t=e.columns)?h(t)?f.createElement(f.Fragment,null,f.createElement("tr",null,t.map((function(e,t){return O(e,{index:t,filterOnly:!1,renderFilter:!1})}))),f.createElement("tr",null,t.map((function(e,t){return O(e,{index:t,filterOnly:!0,renderFilter:!0})})))):f.createElement("tr",null,t.map((function(e,t){return O(e,{index:t,filterOnly:!1,renderFilter:!1})}))):null;return f.createElement("thead",{className:"p-treetable-thead"},P)}));Y.displayName="TreeTableHeader";var $=f.memo((function(e){var t=f.useRef(null),l=f.useRef(null),o=f.useRef(null),a=f.useRef(null),i=f.useRef(null),c=f.useRef(null),u=f.useRef(null),s=function(){if(e.scrollHeight)if(-1!==e.scrollHeight.indexOf("%")){var r=d(t.current);a.current.style.visibility="hidden",a.current.style.height="100px";var l=n.DomHandler.getOuterHeight(r),o=n.DomHandler.getOuterHeight(r.parentElement)*parseInt(e.scrollHeight,10)/100-(l-100);a.current.style.height="auto",a.current.style.maxHeight=o+"px",a.current.style.visibility="visible"}else a.current.style.maxHeight=e.scrollHeight},d=function(e){if(e){for(var t=e;t&&!n.DomHandler.hasClass(t,"p-treetable");)t=t.parentElement;return t}return null};r.useMountEffect((function(){if(e.frozen)a.current.style.paddingBottom=n.DomHandler.calculateScrollbarWidth()+"px";else{var t=n.DomHandler.calculateScrollbarWidth();o.current.style.marginRight=t+"px",u.current&&(u.current.style.marginRight=t+"px")}})),f.useEffect((function(){s()}));var p=n.classNames("p-treetable-scrollable-view",{"p-treetable-frozen-view":e.frozen,"p-treetable-unfrozen-view":!e.frozen&&e.frozenWidth}),m=e.frozen?e.frozenWidth:"calc(100% - "+e.frozenWidth+")",y=e.frozen?null:e.frozenWidth,g=function(){if(n.ObjectUtils.isNotEmpty(e.columns)){var t=e.columns.map((function(e,t){return f.createElement("col",{key:e.field+"_"+t})}));return f.createElement("colgroup",{className:"p-treetable-scrollable-colgroup"},t)}return null}(),b=!e.frozen&&e.scrollHeight?{overflowY:"scroll"}:null;return f.createElement("div",{className:p,style:{width:m,left:y},ref:t},f.createElement("div",{className:"p-treetable-scrollable-header",ref:l,onScroll:function(){l.current.scrollLeft=0}},f.createElement("div",{className:"p-treetable-scrollable-header-box",ref:o},f.createElement("table",{className:"p-treetable-scrollable-header-table"},g,e.header))),f.createElement("div",{className:"p-treetable-scrollable-body",ref:a,style:b,onScroll:function(){var e,r=t.current.previousElementSibling;r&&(e=n.DomHandler.findSingle(r,".p-treetable-scrollable-body")),o.current.style.marginLeft=-1*a.current.scrollLeft+"px",u.current&&(u.current.style.marginLeft=-1*a.current.scrollLeft+"px"),e&&(e.scrollTop=a.current.scrollTop)}},f.createElement("table",{ref:i,style:{top:"0"},className:"p-treetable-scrollable-body-table"},g,e.body)),f.createElement("div",{className:"p-treetable-scrollable-footer",ref:c},f.createElement("div",{className:"p-treetable-scrollable-footer-box",ref:u},f.createElement("table",{className:"p-treetable-scrollable-footer-table"},g,e.footer))))}));function J(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function Q(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$.displayName="TreeTableScrollableView";var ne=f.forwardRef((function(e,o){var a=D.getProps(e),i=M(f.useState(a.expandedKeys),2),c=i[0],u=i[1],s=M(f.useState(a.first),2),m=s[0],y=s[1],g=M(f.useState(a.rows),2),b=g[0],h=g[1],v=M(f.useState(a.sortField),2),S=v[0],C=v[1],E=M(f.useState(a.sortOrder),2),O=E[0],x=E[1],P=M(f.useState(a.multiSortMeta),2),N=P[0],j=P[1],K=M(f.useState(a.filters),2),R=K[0],T=K[1],F=M(f.useState([]),2),U=F[0],H=F[1],z=f.useRef(null),A=f.useRef(null),I=f.useRef(null),L=f.useRef(null),W=f.useRef(null),_=f.useRef(null),V=f.useRef(null),B=f.useRef(null),X=f.useRef(0),Q=f.useRef(0),Z=f.useRef(0),ee=f.useRef(null),re=f.useRef(null),le=f.useRef(null),oe=f.useRef(null),ae=f.useRef(null),ie=f.useRef(null),ce=M(r.useEventListener({type:"mousemove",listener:function(e){_.current&&Ne(e)}}),2),ue=ce[0],se=ce[1],fe=M(r.useEventListener({type:"mouseup",listener:function(e){_.current&&(_.current=!1,je())}}),2),de=fe[0],pe=fe[1],me=function(e){a.onToggle?a.onToggle(e):u(e.value)},ye=function(e){a.onPage?a.onPage(e):(y(e.first),h(e.rows))},ge=function(e){var t,n,r=e.sortField,l=a.defaultSortOrder;if(oe.current=e.sortable,ae.current=e.sortFunction,ie.current=e.sortField,"multiple"===a.sortMode){var o=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if((t=w(Ve()))&&t instanceof Array){var i=t.find((function(e){return e.field===r}));l=i?be(i.order):l}var c={field:r,order:l};l?(t&&o||(t=[]),he(c,t)):a.removableSort&&t&&ve(c,t),n={multiSortMeta:t}}else l=_e()===r?be(qe()):l,a.removableSort&&(r=l?r:null),n={sortField:r,sortOrder:l};a.onSort?a.onSort(n):(y(0),C(n.sortField),x(n.sortOrder),j(n.multiSortMeta))},be=function(e){return a.removableSort?a.defaultSortOrder===e?-1*e:0:-1*e},he=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r].field===e.field){n=r;break}n>=0?t[n]=e:t.push(e)},ve=function(e,t){for(var n=-1,r=0;r<t.length;r++)if(t[r].field===e.field){n=r;break}n>=0&&t.splice(n,1),t=t.length>0?t:null},Se=function(e){return Ce(e)},Ce=function e(t){var r=w(t);if(oe.current&&"custom"===oe.current&&ae.current)r=ae.current({data:t,field:_e(),order:qe()});else{r.sort((function(e,t){var r=_e(),l=n.ObjectUtils.resolveFieldData(e.data,r),o=n.ObjectUtils.resolveFieldData(t.data,r);return xe(l,o,qe())}));for(var l=0;l<r.length;l++)r[l].children&&r[l].children.length&&(r[l].children=e(r[l].children))}return r},Ee=function(e){var t=Ve();return t?we(e,t):e},we=function e(t,n){var r=w(t);r.sort((function(e,t){return Oe(e,t,n,0)}));for(var l=0;l<r.length;l++)r[l].children&&r[l].children.length&&(r[l].children=e(r[l].children,n));return r},Oe=function e(t,r,l,o){var a=n.ObjectUtils.resolveFieldData(t.data,l[o].field),i=n.ObjectUtils.resolveFieldData(r.data,l[o].field);return 0===n.ObjectUtils.compare(a,i,d.default.locale)?l.length-1>o?e(t,r,l,o+1):0:xe(a,i,l[o].order)},xe=function(e,t,r){return n.ObjectUtils.sort(e,t,r,d.default.locale,d.default.nullSortOrder)},Pe=function(e,t,n){Me({value:e,field:t,matchMode:n})},Me=function(e){var t=Be(),n=t?te({},t):{};ke(e.value)?n[e.field]&&delete n[e.field]:n[e.field]={value:e.value,matchMode:e.matchMode},a.onFilter?a.onFilter({filters:n}):(y(0),T(n))},ke=function(e){return null==e||("string"==typeof e&&0===e.trim().length||e instanceof Array&&0===e.length)},De=function(e){var t=n.DomHandler.getOffset(z.current).left;V.current=e.columnEl,B.current=e.column,_.current=!0,X.current=e.originalEvent.pageX-t+z.current.scrollLeft,Te()},Ne=function(e){var t=n.DomHandler.getOffset(z.current).left;n.DomHandler.addClass(z.current,"p-unselectable-text"),I.current.style.height=z.current.offsetHeight+"px",I.current.style.top="0px",I.current.style.left=e.pageX-t+z.current.scrollLeft+"px",I.current.style.display="block"},je=function(e){var t=I.current.offsetLeft-X.current,r=V.current.offsetWidth,l=r+t;if(r+t>parseInt(V.current.style.minWidth||15,10)){if("fit"===a.columnResizeMode){var o=V.current.nextElementSibling,i=o.offsetWidth-t;if(l>15&&i>15)if(a.scrollable){var c=Ke(V.current),u=n.DomHandler.findSingle(c,"table.p-treetable-scrollable-body-table"),s=n.DomHandler.findSingle(c,"table.p-treetable-scrollable-header-table"),f=n.DomHandler.findSingle(c,"table.p-treetable-scrollable-footer-table"),d=n.DomHandler.index(V.current);Re(s,d,l,i),Re(u,d,l,i),Re(f,d,l,i)}else V.current.style.width=l+"px",o&&(o.style.width=i+"px")}else if("expand"===a.columnResizeMode)if(a.scrollable){var p=Ke(V.current),m=n.DomHandler.findSingle(p,"table.p-treetable-scrollable-body-table"),y=n.DomHandler.findSingle(p,"table.p-treetable-scrollable-header-table"),g=n.DomHandler.findSingle(p,"table.p-treetable-scrollable-footer-table");m.style.width=m.offsetWidth+t+"px",y.style.width=y.offsetWidth+t+"px",g&&(g.style.width=y.offsetWidth+t+"px");var b=n.DomHandler.index(V.current);Re(y,b,l,null),Re(m,b,l,null),Re(g,b,l,null)}else A.current.style.width=A.current.offsetWidth+t+"px",V.current.style.width=l+"px";a.onColumnResizeEnd&&a.onColumnResizeEnd({element:V.current,column:B.current,delta:t})}I.current.style.display="none",V.current=null,B.current=null,n.DomHandler.removeClass(z.current,"p-unselectable-text"),Fe()},Ke=function(e){if(e){for(var t=e.parentElement;t&&!n.DomHandler.hasClass(t,"p-treetable-scrollable-view");)t=t.parentElement;return t}return null},Re=function(e,t,n,r){if(e){var l="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!l)throw new Error("Scrollable tables require a colgroup to support resizable columns");var o=l.children[t],a=o.nextElementSibling;o.style.width=n+"px",a&&r&&(a.style.width=r+"px")}},Te=function(){ue(),de()},Fe=function(){se(),pe()},Ue=function(e){var t=e.originalEvent,r=e.column;_.current?t.preventDefault():(Q.current=n.DomHandler.getHiddenElementOuterWidth(L.current),Z.current=n.DomHandler.getHiddenElementOuterHeight(L.current),ee.current=Ie(t.currentTarget),re.current=r,t.dataTransfer.setData("text","b"))},He=function(e){var t=e.originalEvent,r=Ie(t.currentTarget);if(a.reorderableColumns&&ee.current&&r){t.preventDefault();var l=n.DomHandler.getOffset(z.current),o=n.DomHandler.getOffset(r);if(ee.current!==r){var i=o.left-l.left,c=o.left+r.offsetWidth/2;L.current.style.top=o.top-l.top-(Z.current-1)+"px",W.current.style.top=o.top-l.top+r.offsetHeight+"px",t.pageX>c?(L.current.style.left=i+r.offsetWidth-Math.ceil(Q.current/2)+"px",W.current.style.left=i+r.offsetWidth-Math.ceil(Q.current/2)+"px",le.current=1):(L.current.style.left=i-Math.ceil(Q.current/2)+"px",W.current.style.left=i-Math.ceil(Q.current/2)+"px",le.current=-1),L.current.style.display="block",W.current.style.display="block"}}},ze=function(e){a.reorderableColumns&&ee.current&&(e.originalEvent.preventDefault(),L.current.style.display="none",W.current.style.display="none")},Ae=function(e){var t=e.originalEvent,r=e.column;if(t.preventDefault(),ee.current){var l=n.DomHandler.index(ee.current),o=n.DomHandler.index(Ie(t.currentTarget)),i=l!==o;if(i&&(o-l==1&&-1===le.current||l-o==1&&1===le.current)&&(i=!1),i){var c=U?Ye():f.Children.toArray(a.children),u=function(e,t){return Le(e,"columnKey")||Le(t,"columnKey")?n.ObjectUtils.equals(e,t,"props.columnKey"):n.ObjectUtils.equals(e,t,"props.field")},s=c.findIndex((function(e){return u(e,re.current)})),d=c.findIndex((function(e){return u(e,r)}));d<s&&1===le.current&&d++,d>s&&-1===le.current&&d--,n.ObjectUtils.reorderArray(c,s,d);var p,m=[],y=J(c);try{for(y.s();!(p=y.n()).done;){var g=p.value;m.push(Le(g,"columnKey")||Le(g,"field"))}}catch(e){y.e(e)}finally{y.f()}H(m),a.onColReorder&&a.onColReorder({dragIndex:s,dropIndex:d,columns:c})}L.current.style.display="none",W.current.style.display="none",ee.current.draggable=!1,ee.current=null,le.current=null}},Ie=function(e){if("TH"===e.nodeName)return e;for(var t=e.parentElement;"TH"!==t.nodeName&&(t=t.parentElement););return t},Le=function(e,t){return k.getCProp(e,t)},Ge=function(){return a.onPage?a.first:m},We=function(){return a.onPage?a.rows:b},_e=function(){return a.onSort?a.sortField:S},qe=function(){return a.onSort?a.sortOrder:O},Ve=function(){return(a.onSort?a.multiSortMeta:N)||[]},Be=function(){return a.onFilter?a.filters:R},Xe=function(e,t){if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];if(Le(r,"columnKey")===t||Le(r,"field")===t)return r}return null},Ye=function(){var e=f.Children.toArray(a.children);if(e&&e.length){if(a.reorderableColumns&&U){var t,n=[],r=J(U);try{for(r.s();!(t=r.n()).done;){var l=Xe(e,t.value);l&&n.push(l)}}catch(e){r.e(e)}finally{r.f()}return[].concat(n,w(e.filter((function(e){return n.indexOf(e)<0}))))}return e}return null},$e=function(e){var t,n=null,r=J(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;Le(l,"frozen")&&(n=n||[]).push(l)}}catch(e){r.e(e)}finally{r.f()}return n},Je=function(e){var t,n=null,r=J(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;Le(l,"frozen")||(n=n||[]).push(l)}}catch(e){r.e(e)}finally{r.f()}return n},Qe=function(e){var n,r=[],l=Be(),o=f.Children.toArray(a.children),i="strict"===a.filterMode,c=J(e);try{for(c.s();!(n=c.n()).done;){for(var u=n.value,s=te({},u),d=!0,p=!1,m=0;m<o.length;m++){var y=o[m],g=l?l[Le(y,"field")]:null,b=Le(y,"field"),h=void 0;if(g){var v=g.matchMode||Le(y,"filterMatchMode")||"startsWith";if(h={filterField:b,filterValue:g.value,filterConstraint:"custom"===v?Le(y,"filterFunction"):t.FilterService.filters[v],isStrictMode:i,options:{rowData:u,filters:l,props:a,column:{filterMeta:g,filterField:b,props:k.getCProps(y)}}},(!i||Ze(s,h)||et(s,h))&&(i||et(s,h)||Ze(s,h))||(d=!1),!d)break}if(a.globalFilter&&!p){var S=te({},s);h={filterField:b,filterValue:a.globalFilter,filterConstraint:t.FilterService.filters[a.globalFilterMatchMode],isStrictMode:i},(i&&(Ze(S,h)||et(S,h))||!i&&(et(S,h)||Ze(S,h)))&&(p=!0,s=S)}}var C=d;a.globalFilter&&(C=d&&p),C&&r.push(s)}}catch(e){c.e(e)}finally{c.f()}return r},Ze=function(e,t){if(e){var n=!1;if(e.children){var r=w(e.children);e.children=[];var l,o=J(r);try{for(o.s();!(l=o.n()).done;){var a=te({},l.value);et(a,t)&&(n=!0,e.children.push(a))}}catch(e){o.e(e)}finally{o.f()}}if(n)return!0}},et=function(e,t){var r=t.filterField,l=t.filterValue,o=t.filterConstraint,i=t.isStrictMode,c=t.options,u=!1;return o(n.ObjectUtils.resolveFieldData(e.data,r),l,a.filterLocale,c)&&(u=!0),(!u||i&&!tt(e))&&(u=Ze(e,{filterField:r,filterValue:l,filterConstraint:o,isStrictMode:i})||u),u},tt=function(e){return!1!==e.leaf&&!(e.children&&e.children.length)};f.useImperativeHandle(o,(function(){return{props:a,filter:Pe,getElement:function(){return z.current}}}));var nt,rt=function(e,t){var n=_e(),r=qe(),l=w(Ve()),o=Be();return f.createElement(Y,{columns:e,columnGroup:t,tabIndex:a.tabIndex,onSort:ge,sortField:n,sortOrder:r,multiSortMeta:l,resizableColumns:a.resizableColumns,onResizeStart:De,reorderableColumns:a.reorderableColumns,onDragStart:Ue,onDragOver:He,onDragLeave:ze,onDrop:Ae,onFilter:Me,filters:o,filterDelay:a.filterDelay})},lt=function(e,t){return f.createElement(q,{columns:e,columnGroup:t})},ot=function(e,t){return f.createElement(G,{value:e,columns:t,expandedKeys:a.onToggle?a.expandedKeys:c,selectOnEdit:a.selectOnEdit,onToggle:me,onExpand:a.onExpand,onCollapse:a.onCollapse,paginator:a.paginator,first:Ge(),rows:We(),selectionMode:a.selectionMode,selectionKeys:a.selectionKeys,onSelectionChange:a.onSelectionChange,metaKeySelection:a.metaKeySelection,onRowClick:a.onRowClick,onSelect:a.onSelect,onUnselect:a.onUnselect,propagateSelectionUp:a.propagateSelectionUp,propagateSelectionDown:a.propagateSelectionDown,lazy:a.lazy,rowClassName:a.rowClassName,emptyMessage:a.emptyMessage,loading:a.loading,contextMenuSelectionKey:a.contextMenuSelectionKey,onContextMenuSelectionChange:a.onContextMenuSelectionChange,onContextMenu:a.onContextMenu})},at=function(e,t){var r=n.classNames("p-paginator-"+e,a.paginatorClassName);return f.createElement(l.Paginator,{first:Ge(),rows:We(),pageLinkSize:a.pageLinkSize,className:r,onPageChange:ye,template:a.paginatorTemplate,totalRecords:t,rowsPerPageOptions:a.rowsPerPageOptions,currentPageReportTemplate:a.currentPageReportTemplate,leftContent:a.paginatorLeft,rightContent:a.paginatorRight,alwaysShow:a.alwaysShowPaginator,dropdownAppendTo:a.paginatorDropdownAppendTo})},it=function(e,t,n,r,l){var o=rt(t,r),i=lt(t,l),c=ot(e,t);return f.createElement($,{columns:t,header:o,body:c,footer:i,scrollHeight:a.scrollHeight,frozen:n,frozenWidth:a.frozenWidth})},ct=function(e){var t,n,r=Ye(),l=$e(r),o=l?Je(r):r;return l&&(t=it(e,l,!0,a.frozenHeaderColumnGroup,a.frozenFooterColumnGroup)),n=it(e,o,!1,a.headerColumnGroup,a.footerColumnGroup),f.createElement("div",{className:"p-treetable-wrapper p-treetable-scrollable-wrapper"},t,n)},ut=function(e){var t=Ye(),r=rt(t,a.headerColumnGroup),l=lt(t,a.footerColumnGroup),o=ot(e,t),i=n.classNames("p-treetable-table",{"p-treetable-scrollable-table":a.scrollable,"p-treetable-resizable-table":a.resizableColumns,"p-treetable-resizable-table-fit":a.resizableColumns&&"fit"===a.columnResizeMode},a.tableClassName);return f.createElement("div",{className:"p-treetable-wrapper"},f.createElement("table",{ref:A,style:a.tableStyle,className:i},r,l,o))},st=function(){var e=a.value||[];if(!a.lazy&&e&&e.length){var t=Be(),r=_e(),l=Ve();(n.ObjectUtils.isNotEmpty(t)||a.globalFilter)&&(e=Qe(e)),(r||n.ObjectUtils.isNotEmpty(l))&&("single"===a.sortMode?e=Se(e):"multiple"===a.sortMode&&(e=Ee(e)))}return e}(),ft=n.ObjectUtils.findDiffKeys(a,ne.defaultProps),dt=n.classNames("p-treetable p-component",{"p-treetable-hoverable-rows":a.rowHover,"p-treetable-selectable":a.selectionMode&&"single"===a.selectionMode||a.selectionMode&&"multiple"===a.selectionMode,"p-treetable-resizable":a.resizableColumns,"p-treetable-resizable-fit":a.resizableColumns&&"fit"===a.columnResizeMode,"p-treetable-striped":a.stripedRows,"p-treetable-gridlines":a.showGridlines},a.className),pt=(nt=st,a.scrollable?ct(nt):ut(nt)),mt=function(e){return a.lazy?a.totalRecords:e?e.length:0}(st),yt=a.header&&f.createElement("div",{className:"p-treetable-header"},a.header),gt=a.footer&&f.createElement("div",{className:"p-treetable-footer"},a.footer),bt=a.paginator&&"bottom"!==a.paginatorPosition&&at("top",mt),ht=a.paginator&&"top"!==a.paginatorPosition&&at("bottom",mt),vt=function(){if(a.loading){var e=n.classNames("p-treetable-loading-icon pi-spin",a.loadingIcon);return f.createElement("div",{className:"p-treetable-loading"},f.createElement("div",{className:"p-treetable-loading-overlay p-component-overlay"},f.createElement("i",{className:e})))}return null}(),St=a.resizableColumns&&f.createElement("div",{ref:I,className:"p-column-resizer-helper",style:{display:"none"}}),Ct=a.reorderableColumns&&f.createElement("span",{ref:L,className:"pi pi-arrow-down p-datatable-reorder-indicator-up",style:{position:"absolute",display:"none"}}),Et=a.reorderableColumns&&f.createElement("span",{ref:W,className:"pi pi-arrow-up p-datatable-reorder-indicator-down",style:{position:"absolute",display:"none"}});return f.createElement("div",p({ref:z,id:a.id,className:dt,style:a.style,"data-scrollselectors":".p-treetable-wrapper"},ft),vt,yt,bt,pt,ht,gt,St,Ct,Et)}));ne.displayName="TreeTable",exports.TreeTable=ne;
