"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/keyfilter"),n=require("primereact/tooltip"),r=require("primereact/utils");function l(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var a=l(e);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){if(Array.isArray(e))return i(e)}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){return u(e)||c(e)||s(e)||p()}function d(e){if(Array.isArray(e))return e}function m(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,i=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,l=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw l}}return i}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y={defaultProps:{__TYPE:"Chips",id:null,inputRef:null,inputId:null,name:null,placeholder:null,value:null,max:null,disabled:null,readOnly:!1,removable:!0,style:null,className:null,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,separator:null,allowDuplicate:!0,itemTemplate:null,keyfilter:null,addOnBlur:null,onAdd:null,onRemove:null,onChange:null,onFocus:null,onBlur:null,onKeyDown:null,children:void 0},getProps:function(e){return r.ObjectUtils.getMergedProps(e,y.defaultProps)},getOtherProps:function(e){return r.ObjectUtils.getDiffProps(e,y.defaultProps)}},b=a.memo(a.forwardRef((function(e,l){var i,u,c=y.getProps(e),p=a.useState(!1),b=(u=2,d(i=p)||m(i,u)||s(i,u)||v()),h=b[0],g=b[1],O=a.useRef(null),j=a.useRef(null),w=a.useRef(c.inputRef),E=function(e,t){if(!c.disabled||!c.readOnly){var n=f(c.value),r=n.splice(t,1);U(r,t)&&(c.onRemove&&c.onRemove({originalEvent:e,value:r}),c.onChange&&c.onChange({originalEvent:e,value:n,stopPropagation:function(){},preventDefault:function(){},target:{name:c.name,id:c.id,value:n}}))}},P=function(e,t,n){if(t&&t.trim().length){var r=c.value?f(c.value):[];if(c.allowDuplicate||-1===r.indexOf(t)){var l=!0;c.onAdd&&(l=c.onAdd({originalEvent:e,value:t})),!1!==l&&r.push(t)}x(e,r,n)}},D=function(){r.DomHandler.focus(w.current)},k=function(e){var n=e.target.value,l=c.value||[];if(c.onKeyDown&&c.onKeyDown(e),!e.defaultPrevented)switch(e.key){case"Backspace":0===w.current.value.length&&l.length>0&&E(e,l.length-1);break;case"Enter":n&&n.trim().length&&(!c.max||c.max>l.length)&&P(e,n,!0);break;default:c.keyfilter&&t.KeyFilter.onKeyPress(e,c.keyfilter),C()?e.preventDefault():","===c.separator&&(e.key===c.separator||r.DomHandler.isAndroid()&&229===e.which)&&P(e,n,!0)}},x=function(e,t,n){c.onChange&&c.onChange({originalEvent:e,value:t,stopPropagation:function(){},preventDefault:function(){},target:{name:c.name,id:c.id,value:t}}),w.current.value="",n&&e.preventDefault()},A=function(e){if(c.separator){var n=(e.clipboardData||window.clipboardData).getData("Text");if(c.keyfilter&&t.KeyFilter.onPaste(e,c.keyfilter),n){var r=c.value||[],l=n.split(c.separator);l=l.filter((function(e){return(c.allowDuplicate||-1===r.indexOf(e))&&e.trim().length})),r=[].concat(f(r),f(l)),x(e,r,!0)}}},N=function(e){g(!0),c.onFocus&&c.onFocus(e)},R=function(e){if(c.addOnBlur){var t=e.target.value,n=c.value||[];t&&t.trim().length&&(!c.max||c.max>n.length)&&P(e,t,!0)}g(!1),c.onBlur&&c.onBlur(e)},C=function(){return c.max&&c.value&&c.max===c.value.length},I=w.current&&w.current.value,S=a.useMemo((function(){return r.ObjectUtils.isNotEmpty(c.value)||r.ObjectUtils.isNotEmpty(I)}),[c.value,I]),U=function(e,t){return r.ObjectUtils.getPropValue(c.removable,{value:e,index:t,props:c})};a.useImperativeHandle(l,(function(){return{props:c,focus:function(){return r.DomHandler.focus(w.current)},getElement:function(){return O.current},getInput:function(){return w.current}}})),a.useEffect((function(){r.ObjectUtils.combinedRefs(w,c.inputRef)}),[w,c.inputRef]);var B=function(e,t){return c.disabled||c.readOnly||!U(e,t)?null:a.createElement("span",{className:"p-chips-token-icon pi pi-times-circle",onClick:function(e){return E(e,t)}})},K=function(e,t){var n=c.itemTemplate?c.itemTemplate(e):e,r=a.createElement("span",{className:"p-chips-token-label"},n),l=B(e,t);return a.createElement("li",{key:t,className:"p-chips-token p-highlight"},r,l)},T=r.ObjectUtils.isNotEmpty(c.tooltip),F=y.getOtherProps(c),_=r.ObjectUtils.reduceKeys(F,r.DomHandler.ARIA_PROPS),H=r.classNames("p-chips p-component p-inputwrapper",{"p-inputwrapper-filled":S,"p-inputwrapper-focus":h},c.className),M=function(){var e=r.classNames("p-inputtext p-chips-multiple-container",{"p-disabled":c.disabled,"p-focus":h}),t=c.value?c.value.map(K):null,n=a.createElement("li",{className:"p-chips-input-token"},a.createElement("input",o({ref:w,id:c.inputId,placeholder:c.placeholder,type:"text",name:c.name,disabled:c.disabled||C(),onKeyDown:k,onPaste:A,onFocus:N,onBlur:R,readOnly:c.readOnly},_)));return a.createElement("ul",{ref:j,className:e,onClick:D},t,n)}();return a.createElement(a.Fragment,null,a.createElement("div",o({ref:O,id:c.id,className:H,style:c.style},F),M),T&&a.createElement(n.Tooltip,o({target:w,content:c.tooltip},c.tooltipOptions)))})));b.displayName="Chips",exports.Chips=b;
